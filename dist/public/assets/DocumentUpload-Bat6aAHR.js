import{r as a,t as F,a as l,j as e,o as O,A as w,B as u,p as I,q as A,s as q,v as R,X,h,I as B}from"./index-C8m1bZGW.js";import{T as _}from"./textarea-Ke3_LxoV.js";import{S as k,a as z,b as W,c as $,d as J}from"./select-CDT_9mFZ.js";import{P as Y}from"./progress-CXrLDtfV.js";import{U as x}from"./upload-DrH5BTKS.js";import{F as Z}from"./popover-BpxRwVL7.js";const K=[{value:"vaccination_card",label:"Carteira de Vacinação"},{value:"exam",label:"Exame"},{value:"prescription",label:"Receita"},{value:"certificate",label:"Certificado"},{value:"veterinary_document",label:"Documento Veterinário"},{value:"other",label:"Outro"}],Q=25*1024*1024,ee=["application/pdf","image/jpeg","image/png","image/jpg","image/webp","image/heic","image/heif","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv"];function te({petId:T,onUploadSuccess:U}){const[S,n]=a.useState(!1),[y,d]=a.useState(!1),[o,g]=a.useState(null),[D,b]=a.useState(""),[p,v]=a.useState(""),[t,N]=a.useState(""),[c,s]=a.useState(0),C=a.useRef(null),m=F.documents.upload.useMutation({onSuccess:()=>{l.success("Documento enviado com sucesso!"),n(!1),E(),U?.()},onError:r=>{l.error(r.message||"Erro ao enviar documento"),s(0)}}),E=()=>{g(null),b(""),v(""),N(""),s(0)},P=r=>{r.preventDefault(),d(!0)},L=()=>{d(!1)},j=r=>{r.preventDefault(),d(!1);const i=r.dataTransfer.files[0];i&&f(i)},M=r=>{const i=r.target.files?.[0];i&&f(i)},f=r=>{if(!ee.includes(r.type)){l.error("Tipo de arquivo não permitido. Use PDF, imagens (JPG, PNG, WEBP), documentos do Office (DOC, DOCX, XLS, XLSX) ou arquivos de texto (TXT, CSV).");return}if(r.size>Q){l.error("Arquivo muito grande. Tamanho máximo: 25MB");return}g(r),D||b(r.name.replace(/\.[^/.]+$/,""))},V=async r=>{if(r.preventDefault(),!o||!t){l.error("Preencha todos os campos obrigatórios");return}s(10);const i=new FileReader;i.onload=async G=>{const H=G.target?.result;s(50),m.mutate({petId:T,title:D,description:p,category:t,fileData:H,fileName:o.name,mimeType:o.type}),s(100)},i.readAsDataURL(o)};return e.jsxDEV(O,{open:S,onOpenChange:n,children:[e.jsxDEV(w,{asChild:!0,children:e.jsxDEV(u,{children:[e.jsxDEV(x,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:167,columnNumber:11},this),"Enviar Documento"]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:166,columnNumber:9},this)},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:165,columnNumber:7},this),e.jsxDEV(I,{className:"max-w-2xl",children:[e.jsxDEV(A,{children:[e.jsxDEV(q,{children:"Enviar Documento"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:173,columnNumber:11},this),e.jsxDEV(R,{children:"Faça upload de documentos veterinários, exames ou certificados"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:174,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:172,columnNumber:9},this),e.jsxDEV("form",{onSubmit:V,className:"space-y-4",children:[e.jsxDEV("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${y?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onDragOver:P,onDragLeave:L,onDrop:j,onClick:()=>C.current?.click(),children:[e.jsxDEV("input",{ref:C,type:"file",accept:".pdf,.jpg,.jpeg,.png,.webp,.heic,.heif,.doc,.docx,.xls,.xlsx,.txt,.csv",onChange:M,className:"hidden"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:192,columnNumber:13},this),o?e.jsxDEV("div",{className:"flex items-center justify-center gap-4",children:[e.jsxDEV(Z,{className:"h-8 w-8 text-primary"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:202,columnNumber:17},this),e.jsxDEV("div",{className:"text-left flex-1",children:[e.jsxDEV("p",{className:"font-medium",children:o.name},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:204,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:[(o.size/1024/1024).toFixed(2)," MB"]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:205,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:203,columnNumber:17},this),e.jsxDEV(u,{type:"button",variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),g(null)},children:e.jsxDEV(X,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:218,columnNumber:19},this)},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:209,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:201,columnNumber:15},this):e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(x,{className:"h-12 w-12 mx-auto text-muted-foreground"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:223,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm font-medium",children:"Arraste um arquivo ou clique para selecionar"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:224,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"PDF, Imagens, Office ou Texto até 25MB"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:227,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:222,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:181,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(h,{htmlFor:"title",children:"Título *"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:236,columnNumber:13},this),e.jsxDEV(B,{id:"title",value:D,onChange:r=>b(r.target.value),placeholder:"Ex: Carteira de Vacinação 2024",required:!0},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:237,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:235,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(h,{htmlFor:"category",children:"Categoria *"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:247,columnNumber:13},this),e.jsxDEV(k,{value:t,onValueChange:N,required:!0,children:[e.jsxDEV(z,{children:e.jsxDEV(W,{placeholder:"Selecione a categoria"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:250,columnNumber:17},this)},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:249,columnNumber:15},this),e.jsxDEV($,{children:K.map(r=>e.jsxDEV(J,{value:r.value,children:r.label},r.value,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:254,columnNumber:19},this))},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:252,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:248,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:246,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(h,{htmlFor:"description",children:"Descrição"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:263,columnNumber:13},this),e.jsxDEV(_,{id:"description",value:p,onChange:r=>v(r.target.value),placeholder:"Adicione observações sobre este documento...",rows:3},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:264,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:262,columnNumber:11},this),c>0&&c<100&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(Y,{value:c},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:276,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-center text-muted-foreground",children:["Enviando... ",c,"%"]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:277,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:275,columnNumber:13},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(u,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:m.isPending,children:"Cancelar"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:285,columnNumber:13},this),e.jsxDEV(u,{type:"submit",disabled:!o||!t||m.isPending,children:m.isPending?"Enviando...":"Enviar Documento"},void 0,!1,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:284,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:179,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:171,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/rodrigorochameire/Library/CloudStorage/GoogleDrive-rodrigorochameire@gmail.com/Meu Drive/Pessoal/Tuco Care/TeteCareHub/client/src/components/DocumentUpload.tsx",lineNumber:164,columnNumber:5},this)}export{te as D};
